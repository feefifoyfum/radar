{"ast":null,"code":"import React,{useState,useEffect}from'react';import{postsAPI}from'../services/api.ts';import CreatePost from'./CreatePost.tsx';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Feed=()=>{const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[showCreatePost,setShowCreatePost]=useState(false);useEffect(()=>{loadPosts();},[]);const loadPosts=async()=>{try{const postsData=await postsAPI.getPosts();setPosts(postsData);}catch(error){console.error('Error loading posts:',error);}finally{setLoading(false);}};const handlePostCreated=newPost=>{setPosts([newPost,...posts]);setShowCreatePost(false);};const handlePostDeleted=postId=>{setPosts(posts.filter(post=>post.id!==postId));};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'50vh',color:'#000000'},children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'800px',margin:'0 auto',padding:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'2rem',fontWeight:'normal',color:'#000000'},children:\"Feed\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(true),style:{padding:'0.75rem 1.5rem',backgroundColor:'#000000',color:'#ffffff',border:'1px solid #000000',cursor:'pointer',fontSize:'1rem'},children:\"New Post\"})]}),showCreatePost&&/*#__PURE__*/_jsx(CreatePost,{onPostCreated:handlePostCreated,onCancel:()=>setShowCreatePost(false)}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'2rem'},children:posts.length===0?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'2rem',color:'#666666'},children:\"No posts yet. Create the first one!\"}):posts.map(post=>/*#__PURE__*/_jsx(PostCard,{post:post,onDelete:handlePostDeleted},post.id))})]});};const PostCard=_ref=>{let{post,onDelete}=_ref;const[isDeleting,setIsDeleting]=useState(false);const handleDelete=async()=>{if(window.confirm('Are you sure you want to delete this post?')){setIsDeleting(true);try{await postsAPI.deletePost(post.id);onDelete(post.id);}catch(error){console.error('Error deleting post:',error);setIsDeleting(false);}}};return/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #000000',padding:'1.5rem',marginBottom:'1.5rem',backgroundColor:'#ffffff'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.2rem',fontWeight:'normal',color:'#000000',marginBottom:'0.5rem'},children:post.title||'Untitled'}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#666666',fontSize:'0.9rem'},children:[\"by \",post.author.username,\" \\u2022 \",new Date(post.created_at).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,disabled:isDeleting,style:{padding:'0.5rem 1rem',backgroundColor:'#ffffff',color:'#000000',border:'1px solid #000000',cursor:isDeleting?'not-allowed':'pointer',fontSize:'0.9rem'},children:isDeleting?'Deleting...':'Delete'})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#000000',lineHeight:'1.6',marginBottom:'1rem'},children:post.content}),post.image_url&&/*#__PURE__*/_jsx(\"img\",{src:post.image_url,alt:\"Post image\",style:{maxWidth:'100%',height:'auto',border:'1px solid #000000'}})]});};export default Feed;","map":{"version":3,"names":["React","useState","useEffect","postsAPI","CreatePost","jsx","_jsx","jsxs","_jsxs","Feed","posts","setPosts","loading","setLoading","showCreatePost","setShowCreatePost","loadPosts","postsData","getPosts","error","console","handlePostCreated","newPost","handlePostDeleted","postId","filter","post","id","style","display","justifyContent","alignItems","minHeight","color","children","maxWidth","margin","padding","marginBottom","fontSize","fontWeight","onClick","backgroundColor","border","cursor","onPostCreated","onCancel","marginTop","length","textAlign","map","PostCard","onDelete","_ref","isDeleting","setIsDeleting","handleDelete","window","confirm","deletePost","title","author","username","Date","created_at","toLocaleDateString","disabled","lineHeight","content","image_url","src","alt","height"],"sources":["/Users/foyindosunmu/tumblr dupe (foymblr)/frontend/src/components/Feed.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Post } from '../types/index.ts';\nimport { postsAPI } from '../services/api.ts';\nimport CreatePost from './CreatePost.tsx';\n\nconst Feed: React.FC = () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showCreatePost, setShowCreatePost] = useState(false);\n\n  useEffect(() => {\n    loadPosts();\n  }, []);\n\n  const loadPosts = async () => {\n    try {\n      const postsData = await postsAPI.getPosts();\n      setPosts(postsData);\n    } catch (error) {\n      console.error('Error loading posts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePostCreated = (newPost: Post) => {\n    setPosts([newPost, ...posts]);\n    setShowCreatePost(false);\n  };\n\n  const handlePostDeleted = (postId: number) => {\n    setPosts(posts.filter(post => post.id !== postId));\n  };\n\n  if (loading) {\n    return (\n      <div style={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        minHeight: '50vh',\n        color: '#000000'\n      }}>\n        Loading...\n      </div>\n    );\n  }\n\n  return (\n    <div style={{\n      maxWidth: '800px',\n      margin: '0 auto',\n      padding: '2rem'\n    }}>\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '2rem'\n      }}>\n        <h1 style={{\n          fontSize: '2rem',\n          fontWeight: 'normal',\n          color: '#000000'\n        }}>\n          Feed\n        </h1>\n        <button\n          onClick={() => setShowCreatePost(true)}\n          style={{\n            padding: '0.75rem 1.5rem',\n            backgroundColor: '#000000',\n            color: '#ffffff',\n            border: '1px solid #000000',\n            cursor: 'pointer',\n            fontSize: '1rem'\n          }}\n        >\n          New Post\n        </button>\n      </div>\n\n      {showCreatePost && (\n        <CreatePost\n          onPostCreated={handlePostCreated}\n          onCancel={() => setShowCreatePost(false)}\n        />\n      )}\n\n      <div style={{ marginTop: '2rem' }}>\n        {posts.length === 0 ? (\n          <div style={{\n            textAlign: 'center',\n            padding: '2rem',\n            color: '#666666'\n          }}>\n            No posts yet. Create the first one!\n          </div>\n        ) : (\n          posts.map(post => (\n            <PostCard\n              key={post.id}\n              post={post}\n              onDelete={handlePostDeleted}\n            />\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\ninterface PostCardProps {\n  post: Post;\n  onDelete: (postId: number) => void;\n}\n\nconst PostCard: React.FC<PostCardProps> = ({ post, onDelete }) => {\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const handleDelete = async () => {\n    if (window.confirm('Are you sure you want to delete this post?')) {\n      setIsDeleting(true);\n      try {\n        await postsAPI.deletePost(post.id);\n        onDelete(post.id);\n      } catch (error) {\n        console.error('Error deleting post:', error);\n        setIsDeleting(false);\n      }\n    }\n  };\n\n  return (\n    <div style={{\n      border: '1px solid #000000',\n      padding: '1.5rem',\n      marginBottom: '1.5rem',\n      backgroundColor: '#ffffff'\n    }}>\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'flex-start',\n        marginBottom: '1rem'\n      }}>\n        <div>\n          <h3 style={{\n            fontSize: '1.2rem',\n            fontWeight: 'normal',\n            color: '#000000',\n            marginBottom: '0.5rem'\n          }}>\n            {post.title || 'Untitled'}\n          </h3>\n          <p style={{\n            color: '#666666',\n            fontSize: '0.9rem'\n          }}>\n            by {post.author.username} â€¢ {new Date(post.created_at).toLocaleDateString()}\n          </p>\n        </div>\n        <button\n          onClick={handleDelete}\n          disabled={isDeleting}\n          style={{\n            padding: '0.5rem 1rem',\n            backgroundColor: '#ffffff',\n            color: '#000000',\n            border: '1px solid #000000',\n            cursor: isDeleting ? 'not-allowed' : 'pointer',\n            fontSize: '0.9rem'\n          }}\n        >\n          {isDeleting ? 'Deleting...' : 'Delete'}\n        </button>\n      </div>\n      \n      <div style={{\n        color: '#000000',\n        lineHeight: '1.6',\n        marginBottom: '1rem'\n      }}>\n        {post.content}\n      </div>\n      \n      {post.image_url && (\n        <img\n          src={post.image_url}\n          alt=\"Post image\"\n          style={{\n            maxWidth: '100%',\n            height: 'auto',\n            border: '1px solid #000000'\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Feed;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}